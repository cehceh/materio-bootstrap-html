{% extends layout_path %}
{% load static %}
{% load qr_code %}
{% load widget_tweaks %}
{% load i18n %}

{% block content %}

hello
<!-- Page content -->
<!-- <div class="container-fluid mt--6" id="permissionTable"> -->

<div class="row">
    <div class="col-xxl">
        {% include 'layout/partials/includes/page-nav.html' %}
    </div>
</div>
<!-- Basic Layout & Basic with Icons -->
<div class="row">

    <div class="col-xxl">
        <div class="card mb-4">
            QS==> {{permission_table}}
            {{title}}


        </div>
    </div>

</div>


<div class="row">
    <div class="col-xl-12 order-xl-1">
        and-what
        <!-- <div class="col-12"> -->
        {% include 'management/permission/includes/buttons/table_div_buttons.html' %}
    </div>
    <div class="col-xl-12 order-xl-2" v-show="showLog">
        <div class="card">

            <div class="card-header">
                <div class="card-tools">
                    <!-- <form method="GET" action="."> -->
                </div>
                <!-- <hr> -->
                <div class="row">
                    <div class="col-12">
                        <div class="card-body table-responsive p-0">
                            <table id="permission-log-table" class="table text-nowrap">
                                <thead v-show="showLog">
                                    <tr>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "ID" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Code" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Creator" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Created at"
                                            %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User of
                                            update" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Updated at"
                                            %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Bank Name" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Tools" %}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody v-show="showLog">
                                    {% for obj in combined_qs %}
                                    <tr class="text-center">
                                        <td style="height: 1px;">{{obj.id}}</td>
                                        <td style="height: 1px;">{{obj.code}}</td>
                                        <td style="height: 1px;">{{obj.user}}</td>
                                        <td style="height: 1px;">{{obj.created_at}}</td>
                                        <td style="height: 1px;">{{obj.updated_user}}</td>
                                        <td style="height: 1px;">{{obj.updated_at}}</td>
                                        <td style="height: 1px;">{{obj.name}}</td>
                                        <td class="text-center" style="height: 1px;">
                                            <a href="#" class="btn btn-outline-primary btn-sm"
                                                onclick="return confirm('Are you sure, you will print this record ?')">
                                                <span class="fas fa-print"></span>
                                            </a>
                                            &nbsp;
                                            <a href="{% url 'configurations:edit_permission' obj.id %}"
                                                class="btn btn-outline-success btn-sm">
                                                <span class="fas fa-edit"></span>
                                            </a>
                                            &nbsp;
                                            <!-- <a href="#" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure, you will delete this record ?')">
                                                    <span class="fas fa-trash-alt"></span>
                                                </a>
                                                &nbsp; -->
                                            <a href="#" class="btn btn-outline-info btn-sm">
                                                <span class="fas fa-eye"></span>
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END LOG BANK TABLE -->
    <div class="col-xl-12 order-xl-2" v-show="showActive">
        <div class="card">

            <div class="card-header">
                <div class="card-tools">
                    <!-- <form method="GET" action="."> -->
                </div>
                <div class="row">
                    <div class="col-12">

                        <div class="card-body table-responsive p-0">
                            <table id="permission-active-table" class="table text-nowrap">
                                <thead v-show="showActive">
                                    <tr>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Code" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User Name" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User Type" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Mobile Phone"
                                            %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Status" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Tools" %}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody v-show="showActive">
                                    {% for obj in table_qs %}
                                    <tr class="text-center">
                                        <td style="height: 1px;">{{obj.id}}</td>
                                        <td style="height: 1px;">{{obj.code}}</td>
                                        <td style="height: 1px;">{{obj.name}}</td>
                                        <td class="text-center" style="height: 1px;">
                                            <a href="#" class="btn btn-outline-primary btn-sm"
                                                onclick="return confirm('Are you sure, you will print this record ?')">
                                                <span class="fas fa-print"></span>
                                            </a>
                                            &nbsp;
                                            <a href="{% url 'configurations:edit_permission' obj.id %}"
                                                class="btn btn-outline-success btn-sm">
                                                <span class="fas fa-edit"></span>
                                            </a>
                                            &nbsp;
                                            <!-- <a href="#" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure, you will delete this record ?')">
                                                    <span class="fas fa-trash-alt"></span>
                                                </a>
                                                &nbsp; -->
                                            <a href="#" class="btn btn-outline-info btn-sm">
                                                <span class="fas fa-eye"></span>
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- START DELEtE TABLE -->
    <div class="col-xl-12 order-xl-2" v-show="showDeleted">
        <div class="card">
            <div class="card-header">

                <div class="row">
                    <div class="col-12">

                        <div class="card-body table-responsive p-0">
                            <table id="permission-delete-table" class="table text-nowrap">
                                <thead v-show="showDeleted">
                                    <tr>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "ID" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User of
                                            Deletion" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Deleted at"
                                            %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Name" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Tools" %}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody v-show="showDeleted">
                                    {% for obj in deleted_qs %}
                                    <tr class="text-center">
                                        <td style="height: 1px;">{{obj.id}}</td>
                                        <td style="height: 1px;">{{obj.updated_user}}</td>
                                        <td style="height: 1px;">{{obj.deleted_at}}</td>
                                        <td style="height: 1px;">{{obj.name}}</td>
                                        <td class="text-center" style="height: 1px;">
                                            <a href="#" class="btn btn-outline-primary btn-sm"
                                                onclick="return confirm('Are you sure, you will print this record ?')">
                                                <span class="fas fa-print"></span>
                                            </a>
                                            &nbsp;
                                            <a href="{% url 'configurations:edit_permission' obj.id %}"
                                                class="btn btn-outline-success btn-sm">
                                                <span class="fas fa-edit"></span>
                                            </a>&nbsp;
                                            <a href="#" class="btn btn-outline-danger btn-sm"
                                                onclick="return confirm('Are you sure, you want to retsore this record ?')">
                                                <span class="fas fa-undo-alt"></span>
                                            </a>
                                            &nbsp;
                                            <a href="#" class="btn btn-outline-info btn-sm">
                                                <span class="fas fa-eye"></span>
                                            </a>
                                            &nbsp;
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>

            </div>

        </div>
    </div>
    <!-- END DELETED TABLE -->

    <!-- START MAIN TABLE -->
    <div class="col-xl-12 order-xl-2">
        <!-- v-show="showMain" -->
        <div class="card">
            <div class="card-header">

                <div class="row">
                    <div class="col-12">

                        <div class="card-body table-responsive p-0">
                            <table id="permission-main-table" class="table text-nowrap">
                                <thead>
                                    <tr>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Code" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User Name" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User Type" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Mobile Phone"
                                            %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Tools" %}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody v-show="showMain">
                                    {% for obj in main_qs %}
                                    <tr class="text-center">
                                        <!-- <td style="height: 1px;">{{obj.id}}</td>
                                            <td style="height: 1px;">{{obj.code}}</td>
                                            <td style="height: 1px;">{{obj.name}}</td>
                                            <td class="text-center" style="height: 1px;">
                                                <a href="#" class="btn btn-outline-primary btn-sm" onclick="return confirm('Are you sure, you will print this record ?')">
                                                    <span class="fas fa-print"></span>
                                                </a>
                                                &nbsp;
                                                <a href="{% url 'configurations:edit_permission' obj.id %}" class="btn btn-outline-success btn-sm">
                                                    <span class="fas fa-edit"></span>
                                                </a>&nbsp;
                                                
                                                <a href="#" class="btn btn-outline-info btn-sm">
                                                    <span class="fas fa-eye"></span>
                                                </a>
                                                &nbsp;
                                            </td> -->
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- START INACTIVE TABLE -->
    <div class="col-xl-12 order-xl-2" v-show="inActive">
        <div class="card">
            <div class="card-header">

                <div class="row">
                    <div class="col-12">

                        <div class="card-body table-responsive p-0">
                            <table id="permission-inactive-table" class="table text-nowrap">
                                <thead v-show="inActive">
                                    <tr>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Code" %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User Name" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "User Type" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Mobile Phone"
                                            %}</th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Status" %}
                                        </th>
                                        <th class="text-center bg-gradient-lightblue btn-xs">{% trans "Tools" %}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody v-show="inActive">
                                    {% for obj in inactive_qs %}
                                    <tr class="text-center">
                                        <td style="height: 1px;">{{obj.id}}</td>
                                        <td style="height: 1px;">{{obj.name}}</td>
                                        <td class="text-center" style="height: 1px;">
                                            <a href="#" class="btn btn-outline-primary btn-sm"
                                                onclick="return confirm('Are you sure, you will print this record ?')">
                                                <span class="fas fa-print"></span>
                                            </a>&nbsp;
                                            <a href="{% url 'configurations:edit_permission' obj.id %}"
                                                class="btn btn-outline-success btn-sm">
                                                <span class="fas fa-edit"></span>
                                            </a>&nbsp;
                                            <a href="#" class="btn btn-outline-danger btn-sm"
                                                onclick="return confirm('Are you sure, you will delete this record ?')">
                                                <span class="fas fa-trash-alt"></span>
                                            </a>&nbsp;
                                            <a href="#" class="btn btn-outline-info btn-sm">
                                                <span class="fas fa-eye"></span>
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
<!-- ./END ROW -->
<!-- </div> -->



{% endblock %}

{% block page_js %}


<script type="module">
    import { createApp, ref, computed } from '{% static "js/vue.esm-browser.js" %}';
    // const { createApp, ref, computed } = Vue;
    const permissionTable = createApp({
        delimiters: ["[[", "]]"],
        setup() {
            const msg = 'What is going on PERMISSION-PAGE ?';
            const title = 'Permissin-TITLE ';
            return {
                msg, title,
            }
        },
        data() {
            return {
                showDiv: false,
                showTable: false,
                showLog: false,
                showActive: false,
                showDeleted: false,
                showMain: false,
                inActive: false,
                showReport: false,
            };
        },
        computed: {

        },
        methods: {
            formatDate(d) {
                let yyyy = d.getFullYear().toString();
                let mm = (d.getMonth() + 101).toString().slice(-2);
                let dd = (d.getDate() + 100).toString().slice(-2);
                let hh = (d.getHours() + 100).toString().slice(-2);
                let min = (d.getMinutes() + 100).toString().slice(-2);
                let ss = (d.getSeconds() + 100).toString().slice(-2);

                let meridiem = "AM";
                if (parseInt(hh) >= 12) {
                    meridiem = "PM";
                    if (parseInt(hh) > 12) {
                        hh = (parseInt(hh) - 12).toString();
                    }
                }
                return yyyy + '-' + mm + '-' + dd + ' ' + hh + ':' + min + ':' + ss + ' ' + meridiem;
            },

        },
        mounted() {
            let me = this;
            alert("Hiiiiiiii")
            $(document).ready(function () {
                $(document).on('click', '.show-log, .show-deleted, .in-active, .is-active, .show-main', function (e) {
                    console.log('sHOWLOGGGG', me.showLog)
                    console.log('sHOWDELETED', me.showDeleted)
                    //$('#main-permission').DataTable().destroy();
                    let type = true;
                    if (me.showLog == type) {
                        // If showLog is true, set it to false, showDeleted to false, and inActive to false
                        // me.showLog = false;
                        me.showActive = false;
                        me.showDeleted = false;
                        me.showMain = false;
                        me.inActive = false;
                        console.log("SHOW LOG TRUE", me.showLog);
                    } else if (me.showDeleted == type) {
                        // If showDeleted is true, set it to false, showLog to false, and inActive to false
                        me.showLog = false;
                        me.showActive = false;
                        // me.showDeleted = false;
                        me.showMain = false;
                        me.inActive = false;
                        console.log("SHOW LOG FALSEE", me.showLog);
                    } else if (me.inActive == type) {
                        // If inActive is true, set showLog and showDeleted to false
                        me.showLog = false;
                        me.showActive = false;
                        me.showDeleted = false;
                        me.showMain = false;

                        console.log("inActive TRUE");
                    } else if (me.showActive === true) {
                        me.showLog = false;
                        me.inActive = false;
                        me.showDeleted = false;
                        me.showMain = false;
                        console.log("ACTIVE TRUE")

                    } else if (me.showMain == true) {
                        me.showLog = false;
                        me.inActive = false;
                        me.showDeleted = false;
                        me.showActive = false;
                        console.log("Main TRUE")
                    }

                    $.ajax({
                        type: 'GET',
                        url: '{% url "management:user-permission-table" %}',
                        data: {
                            'show-log': me.showLog,
                            'show-deleted': me.showDeleted,
                            'in-active': me.inActive,
                            'is-active': me.showActive,
                            'show-main': me.showMain,
                        },
                        success: function (data) {
                            // Your success handling code...
                            let switchStatus = (label) => {
                                if (label === true) {
                                    return '<i class="badge bg-gradient-green">Active</i>';
                                }
                                return '<i class="badge bg-gradient-secondary">Inactive</i>';

                            };
                            if (me.showMain) {

                                let mainList = data['main-list'];
                                let codeName = data['codename'];
                                let optionList = () => {
                                    return codeName.map((perm) => {
                                        // Generating option elements with values and display text
                                        return `<option value="${perm.id}">${perm.codename}</option>`;
                                    }).join('');  // Join the array of options to form a single string
                                }

                                $("#permission-main-table").DataTable().destroy();
                                $("#permission-main-table tbody").empty();  // Clear existing rows
                                mainList.forEach((obj, index, array) => {
                                    // let del_url = "{% url 'switch_delete' id=0 app_name='account' model='CustomUser' ".replace("0", `${obj.id}`)
                                    let profile_url = "{% url 'profile:user_details_profile' user_id=0 %}".replace("0", `${obj.id}`)
                                    $('#permission-main-table tbody').append(`
                                        <tr class="text-center">
                                            <td style="height: 1px;">${obj.id}</td>
                                            <td style="height: 1px;">${obj.username}</td>
                                            <td style="height: 1px;">
                                                Group Name: ${obj.groups__name}
                                            </td>
                                            <td style="height: 1px;">
                                                <select class="form-control form-control-sm select2" multiple="multiple">
                                                    ${optionList()}
                                                </select>
                                                
                                            </td>
                                            <td class="text-center" style="height: 1px;">
                                                <a href="#" class="btn btn-outline-primary btn-sm" onclick="return confirm('Are you sure, you will print this record ?')">
                                                    <span class="fas fa-print"></span>
                                                </a>
                                                &nbsp;
                                                <a href="#" class="btn btn-outline-warning btn-sm" >
                                                    <i class="fas fa-save"></i> 
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-success btn-sm">
                                                    <span class="fas fa-edit"></span>
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure, you want to delete this record ?')">
                                                    <span class="fas fa-trash-alt"></span>
                                                </a>
                                                &nbsp;
                                                <a href="#" class="btn btn-outline-info btn-sm">
                                                    <span class="fas fa-eye"></span>
                                                </a>
                                                &nbsp;
                                            </td>
                                        </tr>
                                    `);
                                });

                                let mainTable = $("#permission-main-table").DataTable({
                                    // dom: 'Bfrtip',
                                    // paging: true,
                                    // searching: true,
                                    ordering: true,
                                    order: [[0, "desc"]],
                                    pagingType: 'full_numbers',
                                    // "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
                                    "pageLength": 25,
                                    "responsive": true,
                                    "lengthChange": false,
                                    "autoWidth": false,
                                    "buttons": [
                                        {
                                            extend: 'print',
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        {
                                            extend: 'excel',
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        {
                                            extend: "colvis",
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        ,
                                    ],
                                }).buttons().container().appendTo('#permission-main-table_wrapper .col-md-6:eq(0)');
                            }
                            else if (me.showActive) {
                                let activeList = data['active-list'];

                                $("#permission-active-table").DataTable().destroy();
                                $("#permission-active-table tbody").empty();  // Clear existing rows
                                activeList.forEach((obj, index, array) => {
                                    // let del_url = "{% url 'switch_delete' id=0 app_name='users' model='CustomUser'".replace("0", `${obj.id}`)
                                    let status_url = "{% url 'switch_active' id=0 app_name='users' model_name='CustomUser'%} ".replace("0", `${obj.id}`)
                                    $('#permission-active-table tbody').append(`
                                        <tr class="text-center">
                                            <td style="height: 1px;">${obj.id}</td>
                                            <td style="height: 1px;">${obj.username}</td>
                                            <td style="height: 1px;">${obj.role}</td>
                                            <td style="height: 1px;">${obj.mobile1}</td>
                                            <td style="height: 1px;">
                                                <a href="${status_url}" onclick="return confirm('Are you sure ?')">
                                                    <i class="badge bg-gradient-green">Active</i>
                                                </a> 
                                            </td>
                                            <td class="text-center" style="height: 1px;">
                                                <a href="#" class="btn btn-outline-primary btn-sm" onclick="return confirm('Are you sure, you will print this record ?')">
                                                    <span class="fas fa-print"></span>
                                                </a>
                                                &nbsp;
                                                <a href="#" class="btn btn-outline-warning btn-sm" >
                                                    <i class="fas fa-save"></i> 
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-success btn-sm">
                                                    <span class="fas fa-edit"></span>
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure, you want to delete this record ?')">
                                                    <span class="fas fa-trash-alt"></span>
                                                </a>
                                                &nbsp;
                                                <a href="#" class="btn btn-outline-info btn-sm">
                                                    <span class="fas fa-eye"></span>
                                                </a>
                                                &nbsp;
                                            </td>
                                        </tr>
                                    `);
                                });

                                $("#permission-active-table").DataTable({
                                    // dom: 'Bfrtip',
                                    // paging: true,
                                    // searching: true,
                                    ordering: true,
                                    order: [[0, "desc"]],
                                    pagingType: 'full_numbers',
                                    // "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
                                    "pageLength": 25,
                                    "responsive": true,
                                    "lengthChange": false,
                                    "autoWidth": false,
                                    "buttons": [
                                        {
                                            extend: 'print',
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        {
                                            extend: 'excel',
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        {
                                            extend: "colvis",
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        ,
                                    ],
                                }).buttons().container().appendTo('#permission-active-table_wrapper .col-md-6:eq(0)');
                            }

                            else if (me.showLog) {

                                let logList = data['log-list'];

                                $("#log-table").DataTable().destroy();
                                $("#log-table tbody").empty();  // Clear existing rows
                                logList.forEach((obj, index, array) => {


                                    let createdAt = me.formatDate(new Date(obj.created_at))
                                    let updatedAt = me.formatDate(new Date(`${obj.updated_at}`))
                                    $("#permission-log-table tbody").append(`
                                        <tr class="text-center">
                                            <td style="height: 1px;">${obj.id}</td>
                                            <td style="height: 1px;">${obj.code}</td>
                                            <td style="height: 1px;">${obj.user__username}</td>
                                            <td style="height: 1px;">${createdAt}</td>
                                            <td style="height: 1px;">${obj.updated_user__username}</td>
                                            <td style="height: 1px;">${updatedAt}</td>
                                            <td style="height: 1px;">${obj.name}</td>
                                            <td class="text-center" style="height: 1px;">
                                                <a href="#" class="btn btn-outline-primary btn-sm" onclick="return confirm('Are you sure, you will print this record ?')">
                                                    <span class="fas fa-print"></span>
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-warning btn-sm" >
                                                    <i class="fas fa-save"></i> 
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-success btn-sm">
                                                    <span class="fas fa-edit"></span> 
                                                </a>&nbsp;
                                                <a href="#" class="btn btn-outline-info btn-sm">
                                                    <span class="fas fa-eye"></span>
                                                </a>&nbsp;
                                            </td>
                                        </tr>
                                    `)
                                });
                                // FOR getting the version 
                                versionNo = $.fn.dataTable.version;
                                console.log('VERSION:::-->>> ', versionNo);
                                // Initialize the Datatable again
                                // $("#main-permission").DataTable();
                                $("#permission-log-table").DataTable({
                                    // dom: 'Bfrtip',
                                    // paging: true,
                                    // searching: true,
                                    ordering: true,
                                    order: [[0, "desc"]],
                                    pagingType: 'full_numbers',
                                    // "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
                                    "pageLength": 25,
                                    "responsive": true,
                                    "lengthChange": false,
                                    "autoWidth": false,
                                    "buttons": [
                                        {
                                            extend: 'print',
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        {
                                            extend: 'excel',
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        {
                                            extend: "colvis",
                                            className: 'bg-gradient-lightblue btn btn-sm',
                                            exportOptions: {
                                                columns: ':visible'
                                            }
                                        },
                                        ,
                                    ],
                                }).buttons().container().appendTo('#permission-log-table_wrapper .col-md-6:eq(0)');
                            }
                        },
                        error: function () {
                            // Your error handling code...
                        }
                    });
                    e.preventDefault();
                });
            });
        },
    });
    permissionTable.mount("#permissionTable")

</script>




{% endblock page_js %}